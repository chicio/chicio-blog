import { StackVisualizer } from "../../components/sections/dsa/components/stack-visualizer";
import { InteractiveBlock } from "../../components/sections/dsa/components/interactive-block";

# Stacks

A **stack** is a fundamental **LIFO (Last In, First Out)** data structure: this means that the **last element added** to the stack is the **first one to be removed**. 
You can think of it like a stack of plates: you always add new plates on top, and when you need a plate, you take the one on top first.

Stacks are simple yet powerful, and they form the basis for many algorithms and data structures. 
Their strength comes from the fact that operations are **always performed at one end**, called the **top of the stack**. 
This allows for **constant-time insertion and removal**, which can be very efficient compared to other data structures like arrays or linked lists for certain use cases.

There are three main operations in a stack:

- **Push**: Add an element to the top of the stack. Every new element goes on top, potentially hiding the elements below.
- **Pop**: Remove the element from the top of the stack. Only the top element can be removed at any time, enforcing the LIFO principle.
- **Peek / Top**: Inspect the element at the top without removing it. Useful to see what is currently “active” or to make decisions based on the most recent addition.

These operations make stacks ideal for **temporary storage** of data where you only care about the last item added, not the entire collection.

Stacks are often **implicit in algorithms**, even if you don’t see a formal stack object:

- **Backtracking problems**: keep track of choices or moves (e.g., solving a maze or generating permutations).  
- **Reversals**: reverse a sequence of elements by pushing them onto a stack and popping them in order.  
- **Nested structures**: parsing expressions, matching parentheses, or evaluating mathematical formulas (e.g., Reverse Polish Notation).  
- **Function calls**: programming languages use a call stack internally to track function calls and returns.

Stacks can be implemented using **arrays** or **linked lists**, but the key principle remains: **all operations are performed at the top**. 
This simplicity is why stacks are often a first step in algorithmic thinking, allowing you to manage data in a controlled, sequential manner.

```typescript
class Stack<T> {
  private items: T[] = [];

  push(element: T): void {
    this.items.push(element);
  }

  pop(): T | undefined {
    return this.items.pop();
  }

  peek(): T | undefined {
    return this.items[this.items.length - 1];
  }

  isEmpty(): boolean {
    return this.items.length === 0;
  }

  size(): number {
    return this.items.length;
  }
}
```

<InteractiveBlock title="Stack Visualization">
    <StackVisualizer />
</InteractiveBlock>

## 2. Classic Stack Patterns
- Matching / balancing (parentheses, duplicates)
- Parsing / evaluating expressions (RPN, calculator)
- Backtracking / undo patterns

## 3. Monotonic Stack
- Definition: a stack maintaining an increasing or decreasing invariant
- How it works: push while preserving order, pop when invariant violated
- Amortized O(n) guarantees
- Typical use cases: next greater/smaller, spans, max area/range

## 4. Common Tools and Techniques
- Frequency maps or auxiliary stacks if needed
- Maintaining invariants
- Running max/min while traversing
- Shrinking / expanding the stack conceptually

## 5. Time & Space Complexity
- Classic stack operations: O(1) time, O(n) space (for n elements)
- Monotonic stack: O(n) time (amortized), O(n) space

## 6. Exercises

| Problem | Technique | Solution |
|---------|-----------|----------|
| [Valid Parentheses](https://leetcode.com/problems/valid-parentheses/) | Stack | Soon available |
| [Remove All Adjacent Duplicates in String](https://leetcode.com/problems/remove-all-adjacent-duplicates-in-string/) | Stack | Soon available |
| [Min Stack](https://leetcode.com/problems/min-stack/) | Stack | Soon available |
| [Remove Duplicate Letters](https://leetcode.com/problems/remove-duplicate-letters/) | Stack | Soon available |
| [Removing Stars From a String](https://leetcode.com/problems/removing-stars-from-a-string/) | Stack | Soon available |
| [Evaluate Reverse Polish Notation](https://leetcode.com/problems/evaluate-reverse-polish-notation/) | Stack | Soon available |
| [Basic Calculator II](https://leetcode.com/problems/basic-calculator-ii/) | Stack | Soon available |
| [Longest Valid Parentheses](https://leetcode.com/problems/longest-valid-parentheses/) | Stack | Soon available |
| [Next Greater Element I](https://leetcode.com/problems/next-greater-element-i/) | Monotonic Stack | Soon available |
| [Daily Temperatures](https://leetcode.com/problems/daily-temperatures/) | Monotonic Stack | Soon available |
| [Online Stock Span](https://leetcode.com/problems/online-stock-span/) | Monotonic Stack | Soon available |
| [132 Pattern](https://leetcode.com/problems/132-pattern/) | Monotonic Stack | Soon available |
| [Number of Visible People in a Queue](https://leetcode.com/problems/number-of-visible-people-in-a-queue/) | Monotonic Stack | Soon available |
| [Largest Rectangle in Histogram](https://leetcode.com/problems/largest-rectangle-in-histogram/) | Monotonic Stack | Soon available |